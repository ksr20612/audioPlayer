# 1. 기획
- 예시로 구현해주신 플레이리스트 페이지와 유사한 형태로 제작을 결정하였습니다.
- 오디오 플레이어와 음원 목록의 배치만 바꾸었습니다. 

# 2. 구성 개요

## `개발 환경`
- os: 맥
- typescript(5.1.3)
- react(18.2.0)

## `전역 상태 관리(클라이언트측 데이터 관리)` : react-redux(8.1.0), reduxjs/toolkit(1.9.5)
- 플레이할 오디오의 정보(id, title, url)를 관리할 전역값이 존재해야 한다고 판단, redux-toolkit을 사용하여 해당값을 관리하도록 하였습니다.

## `서버측 데이터 관리` : axios(1.3.2), react-query(4.26.1)
- 경험상 클라이언트측 데이터와 서버측 데이터를 분리하여 관리하는 것이 확장성이나 유지보수에 좋아 react-query를 사용하였습니다.
- API를 확인하였을 때, 페이징 처리되지 않은 큰 사이즈의 MusicList를 넘겨주기 때문에 데이터를 캐싱해두는 것이 필요하다고 생각하였습니다.
- 추가적으로 MusicList는 서버측에서 페이징 처리되지 않고 넘어오기 때문에 지연 및 사전 로딩이 불가하여, 최적화를 위해 react-window를 사용하여 윈도잉 기법을 적용하였습니다.
- 브라우저 호환성과 커스텀이 유리한 axios를 사용하여 비동기 데이터를 가져오는 것으로 결정하였습니다.
- axios의 interceptors를 사용하여 에러 처리를 일원화하였습니다.
- Suspense와 ErrorBoundary를 사용하여 로딩과 에러 처리를 간편하게 핸들링하였습니다.

## `스타일링` : styled-components(5.3.6)
- 가장 사용 경험이 많은 styled-components를 이용하여 스타일링을 하였습니다.
- styled-components.d.ts를 생성하고 적용하여 styled 컴포넌트 내에서 쉽게 타이핑/참조할 수 있게 설정하였습니다.

## `테스팅` : jest(29.5.0), cypress(12.14.0)
- 일부 함수의 단위테스트에는 jest를, 컴포넌트 테스트와 E2E테스트에는 cypress를 사용하였습니다.

# 3. 요구사항별 상세

## `API 통신`
- API 오류 발생시 UI 처리: suspense와 error boundary를 사용하여 화면에 표시되도록 비동기 통신에 오류 발생시 화면에 해당 컴포넌트 안에 오류가 표현되도록 하였습니다.
- ![오류](image.png)
- API 응답 대기 상태 역시 suspense로 기존의 로딩 스피너로 표현하였습니다.

## `플레이리스트 페이지`
- atomic design을 사용하여 컴포넌트들을 구분하였습니다. 비동기 통신으로 데이터를 가져와야 하는 `더러운` 컴포넌트의 생성이 필수불가결하기 때문에 containers 폴더 안에서 관리하였고, containers/suspenes 폴더 안쪽에서 suspense/error-boundary로 감싸놓았습니다.
- react-window를 사용하여 MusicList를 구성해두었습니다(최적화 고려).
    - react-window는 고정 크기의 윈도우 창으로 요구하기 때문에, useGetElementSize 훅을 생성하여 컴포넌트 최초 렌더링시 크기를 받아오게끔 설정하였습니다.
    - 사용자가 스크롤을 내려 플레이리스트의 음악이 뷰포인트에 들어올 시에 해당 음악의 url을 prefetch하도록 설정하였습니다.
- 정보들과 재생 버튼을 구현하였습니다.
- react-query의 select 프로퍼티 내에서 최신 발매일 순으로 정렬하였습니다.

## `오디오 플레이어`
- 구현 요구사항에 맞춰 개발하였습니다. 
- useCreateAudio 훅을 제작하여 오디오 생성부를 분리해두었습니다. 
    - useCreateAudio 훅 내부에서 redux에 저장할 전역 상태들을 이용하고 dispatch 호출하는 것은 의존성을 높인다고 판단하였습니다.
- useFetchAudio 훅을 제작하여 오디오 url을 가져오는 로직을 분리해두었습니다.
- 오디오의 재생바(Slider.tsx)는 html input[type='range'] 엘리먼트를 사용하여 커스텀하였습니다.

# 4. 개선 및 추가 개발이 필요한 부분

## `최적화`
- (1) containers 폴더를 만들고, (2) React.memo를 적극 활용하여 애토믹 디자인의 최대 단점인 props-drilling과 컴포넌트 렌더링 횟수 증가 이슈를 완화하려 하였으나, 조금 부족하다고 생각합니다.

## `테스트`
- 컴포넌트 테스팅과 E2E 테스팅이 익숙하지 않아서 일부 테스트 코드만 작성해놓았습니다.
    
## `플레이리스트의 재생버튼 동작성`
- 재생 버튼이 간헐적으로 동작하지 않는 이슈가 있습니다. 컴포넌트가 과잉 렌더링되는 점이 원인인데요, 해당 이슈를 확실하게 해결할 로직을 시간 안에 생각해내지 못하였습니다.

